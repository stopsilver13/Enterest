{% extends "sharespot/series_base.html" %}

{% load staticfiles %}

{% block title %}
    {{ series.name }} 리뷰
{% endblock %}

{% block head_extra_series %}
<link rel="stylesheet" type="text/css" href="{% static 'css/series_review.css' %}">
{% endblock %}

{% block content_series %}
  <div class="event_review_content">
    <div class="event_review_top">
      <div class="event_review_rating">
        <p> 평점 </p>
        <span>( {{ series.get_series_review.count }} )</span>
        <div class="go_rate" onclick="window.location.href='/sharespot/register/review/'"> 평가 등록 </div>
        <div class="total_rating_zone">
          <p>{{ series.get_series_star }}</p>
          <div></div>
        </div>
        <div class="star_graph">
          {% for num in series.get_star_num %}
            {{ num }}
          {% endfor %}
        </div>
      </div>
      <div class="event_emotion">
        <p>감정 태그</p>
        {% for emotion in series.get_emotion_set %}
          <div>
            {% for content in emotion %}
              &nbsp;{{ content }}
            {% endfor %}
          </div>
        {% endfor %}
          <div> 온몸에 전율이 흐르는  132</div>
          <div> 짜릿한  98</div>
          <div> 뭔가 아쉬운  132</div>
          <div> 소름끼치는  132</div>
          <div> 배꼽 빠지는  132</div>
          <div> 아니 이거 유저가 추가 가능?  132</div>
          <div> 최대 3줄은 어떻게 하지..  132</div>
      </div>
    </div>
  </div>
  <div class="event_review_bot">
    <div class="event_review_bot_wrapper">
      <div class="event_review_bot_header">
        <p> 공연리뷰 </p>
        <span>( {{ series.get_series_review.count }} )</span>
        <div class="go_rate" onclick="window.location.href='/sharespot/register/review/'"> 리뷰 등록 </div>
      </div>
      <div class="event_reviews_wrapper">
        {% for review in reviews %}
        <div class="event_reviews">
          <div class="reviews_header">
            <div class="reviews_user_info">
              {% if review.anony_name %}
              <div class="reviews_user_pic" style="background-image: url({% static "img/anony.png" %})"></div>
              {% else %}
              <div class="reviews_user_pic" style="background-image: url({{ review.ticket.user.profile.img.url }});"></div>
              {% endif %}
              <div class="reviews_user_profile">
                {% if review.anony_name %}
                  <p>{{ review.anony_name }}</p>
                {% else %}
                  <p>{{ review.ticket.user.profile.nick_name }}</p>
                {% endif %}
                <h4>{{ review.created_at|date:"Y년 m월 d일" }}</h4>
              </div>
            </div>
            <div class="reviews_user_badge">
              {% for badge in review.badge_set.all %}
                <div style="background-color: {{ badge.color }};">{{ badge.name }}</div>
              {% endfor %}
            </div>
          </div>
          <div class="reviews_rating_zone">
            <div>{{ review.total_star }}</div>
          </div>

          <div class="reviews_body">
            <img src="{{ review.ticket.image_set.first.img.url }}" alt="">
            {% if review.content %}
            <div class="reviews_body_text">
              <p>{{ review.content }}</p>
            </div>
            {% endif %}
            <h4> 더보기 </h4>
          </div>

          <div class="reviews_footer">
            <i class="far fa-heart"></i>
            <p>{{ review.count_thanked }}</p>
          </div>
        </div>
        {% endfor %}



        <div class="event_reviews">
          <div class="reviews_header">
            <div class="reviews_user_info">
              <div class="reviews_user_pic"></div>
              <div class="reviews_user_profile">
                <p> 유저닉네임 </p>
                <h4> 2018년 6월 19일 </h4>
              </div>
            </div>
            <div class="reviews_user_badge">
              <div> 우수 </div>
            </div>
          </div>
          <div class="reviews_rating_zone">
            <div></div>
          </div>
          <div class="reviews_body">
            <div class="reviews_body_text">
              <p> 섹시하고 섹시하다! 재즈와 함께 흥이 절로 났던 공연이었습니다. 살인이라는 무거운 이야기이지만 결코 극은 무겁지 않고 벨마와 록시 외 배우들의 연기 그리고 오케스트라가 무대 위에 있다는 특이점, 많은 볼거리, 빠른 전개, 관객과의 호흡 등 왜 이렇게 사랑받는지 알게되었습니다. 벨마 역의 최정원배우님은 갈라쇼나 다른 공연에서 올댓재즈 많이 들어봤지만 극과 함께 어우러진 올댓재즈는 정말 최고였습니다. 무대에서 논다는게 이런거구나.. 했습니다. 그리고 슬픈 씬도 아닌데 갑자기 뭔가 벅차오르는게 팍팍한 일상 속에 내가 시카고를 보고 있는 지금이 너무 행복해서였는지 갑자기 눈물이 흘렀습니다ㅠㅠ.. #소름끼치는 #감정태그는 이런식 </p>
            </div>
            <h4> 더보기 </h4>
          </div>
          <div class="reviews_footer">
            <i class="far fa-heart"></i>
            <p>  2 </p>
          </div>
        </div>

        <div class="event_reviews">
          <div class="reviews_header">
            <div class="reviews_user_info">
              <div class="reviews_user_pic"></div>
              <div class="reviews_user_profile">
                <p> 유저닉네임 </p>
                <h4> 2018년 6월 19일 </h4>
              </div>
            </div>
            <div class="reviews_user_badge">
              <div> 우수 </div>
            </div>
          </div>
          <div class="reviews_rating_zone">
            <div></div>
          </div>
          <div class="reviews_body">
            <img src="{% static 'img/example.jpg' %}" alt="">
            <div class="reviews_body_text">
              <p> 섹시하고 섹시하다! 재즈와 함께 흥이 절로 났던 공연이었습니다. 살인이라는 무거운 이야기이지만 결코 극은 무겁지 않고 벨마와 록시 외 배우들의 연기 그리고 오케스트라가 무대 위에 있다는 특이점, 많은 볼거리, 빠른 전개, 관객과</p>
            </div>
            <h4> 더보기 </h4>
          </div>
          <div class="reviews_footer">
            <i class="far fa-heart"></i>
            <p>  2 </p>
          </div>
        </div>

        <div class="event_reviews">
          <div class="reviews_header">
            <div class="reviews_user_info">
              <div class="reviews_user_pic"></div>
              <div class="reviews_user_profile">
                <p> 유저닉네임 </p>
                <h4> 2018년 6월 19일 </h4>
              </div>
            </div>
            <div class="reviews_user_badge">
              <div> 우수 </div>
            </div>
          </div>
          <div class="reviews_rating_zone">
            <div></div>
          </div>
          <div class="reviews_body">
            <img src="{% static 'img/example.jpg' %}" alt="">
            <div class="reviews_body_text">
              <p> 섹섹시하고 섹시하다! 재즈와 함께 흥이 절로 났던 공연이었습니다. 살인이라는 무거운 이야기이지만 결코 극은 무겁지 않고 벨마와 록시 외 배우들의 연기 그리고 오케스트라가 무대 위에 있다는 특이점, 많은 볼거리, 빠른 전개, 관객과의 호흡 등 왜 이렇게 사랑받는지 알게되었습니다. 벨마 역의 최정원배우님은 갈라쇼나 다른 공연에서 올댓재즈 많이 들어봤지만 극과 함께 어우러진 올댓재즈는 정말 최고였습니다. 무대에서 논다는게 이런거구나.. 했습니다. 그리고 슬픈 씬도 아닌데 갑자기 뭔가 벅차오르는게 팍팍한 일상 속에 내가 시카고를 보고 있는 지금이 너무 행복해서였는지 갑자기 눈물이 흘렀습니다ㅠㅠ.. #소름끼치는 #감정태그는 이런식 </p>
            </div>
            <h4> 더보기 </h4>
          </div>
          <div class="reviews_footer">
            <i class="far fa-heart"></i>
            <p>  2 </p>
          </div>
        </div>

        <div class="event_reviews">
          <div class="reviews_header">
            <div class="reviews_user_info">
              <div class="reviews_user_pic"></div>
              <div class="reviews_user_profile">
                <p> 유저닉네임 </p>
                <h4> 2018년 6월 19일 </h4>
              </div>
            </div>
            <div class="reviews_user_badge">
              <div> 우수 </div>
            </div>
          </div>
          <div class="reviews_rating_zone">
            <div></div>
          </div>
          <div class="reviews_body">
            <img src="{% static 'img/example.jpg' %}" alt="">
            <div class="reviews_body_text">
              <p> 섹시하고 섹시하다! 재즈와 함께 흥이 절로 났던 공연이었습니다. 살인이라는 무거운 이야기이지만 결코 극은 무겁지 </p>
            </div>
            <h4> 더보기 </h4>
          </div>
          <div class="reviews_footer">
            <i class="far fa-heart"></i>
            <p>  2 </p>
          </div>
        </div>



<script>
$(document).ready(function() {
  $('.reviews_body_text').each(function() {
    if( $(document).width() < 768 ) {
      if( $(this).children('p').height() <= 85 ) {
        $(this).siblings('h4').hide();
      }
    } else {
      if( $(this).children('p').height() <= 140 ) {
        $(this).siblings('h4').hide();
      }
    }
  });
});


var el, up, ps, totalHeight;
$('.reviews_body h4').click(function() {

  totalHeight = 0;
  el = $(this);
  up = el.parent().children('.reviews_body_text');
  ps = up.find('p');

  ps.each(function() {
    totalHeight += $(this).outerHeight();
  });

  up
    .css({
      'height' : up.height(),
      'max-height' : 9999
    })
    .animate({
      "height": totalHeight
    });

  el.fadeOut();

  return false;
});
</script>
{% endblock %}